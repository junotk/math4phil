\documentclass[11pt,a4paper]{jsarticle}
%
\usepackage{amsmath,amssymb}
\usepackage{bm}
\usepackage[dvipdfmx]{graphicx}	% required for `\includegraphics' (yatex added)
\usepackage{setspace}           % required for `\doublespace'
\usepackage{tikz}
\usepackage{natbib}
\usepackage{ascmac}
\usepackage[margin=30truemm, left=40truemm, right=40truemm]{geometry}
%
\setlength{\parskip}{3mm} %段落間にスペースを入れる

\input{my_macros.tex}

% \pagestyle{myheadings}
% \markright{\footnotesize \sf 2022秋期「哲学者のための数学」授業資料（大塚淳） \ \ 配布禁止}
\begin{document}


\title{2. 関係と関数}
\author{2022秋期「哲学者のための数学」授業資料（大塚淳）}
\date{ver. \today}
\maketitle

\section{関係}
1章では，（適用基準が明確な）述語が部分集合と対応することを見た．
ただしここでの「述語」とは，「歌手である」や「偶数である」といったように，主語のみを空欄とする一項述語であった．
では「〜は...を愛する」や「〜は...で割り切れる」といったような二項述語ないし\emph{関係}(relation)は何に対応するだろうか？
これらはデカルト積の部分集合に対応する．

これを例で考えるため，$A := \{\text{Alice, Bob, Chris}\}$を人の集合，$B := \{ \text{清水寺, 金閣寺, 銀閣寺}\}$を寺社仏閣の集合として，誰がどこを訪れたことがあるかを示す表を作ってみよう．

\begin{table}[h]
\centering
\begin{tabular}{cccc} \hline
  & Alice & Bob & Chris \\ \hline 
清水寺 & \checkmark & & \checkmark \\
金閣寺 & & \checkmark &  \\
銀閣寺 & \checkmark  & \checkmark & \\ \hline
\end{tabular} 
\end{table}
この表はそのまま，$A \times B$のデカルト積を表しており，チェックマークがついているところはその部分集合を構成していると考えることができる．
なので「〜は...に行ったことがある」という二項関係は，この部分集合$R \in A \times B$と考えることができる．
具体的には
\[
 R := \{ (\text{Alice, 清水寺}), (\text{Alice, 銀閣寺}), (\text{Bob, 金閣寺}), (\text{Bob, 銀閣寺}), (\text{Chris, 清水寺}) \}
\]
であり，内包的には
\[
 R := \{ (x,y) \in A \times B| x \text{は} y \text{に行ったことがある}\}
\]
となる．「Bobは銀閣寺に行ったことがある」という事実は$(\text{Bob, 銀閣寺}) \in R$によって表される．
ちなみに$a$が$b$に対し$R$という関係を持つ，とわざわざ書くのは長いので，短く$aRb$と表すことにする．
また関係$R$に対応する部分集合を，$R$のグラフとよぶこともある．

また自然数について「〜は...以下である」という関係$\leq$は，
\[
 L := \{ (x,y) \in \bbN \times \bbN | x \leq y \}
\]
で表すことができる．例えば$(2, 5) \in L, (100, 84) \not\in L$である．

同様の仕方で，三項以上の関係も定義できる．一般に$n$関係は($n$-ary relatiohship)は$n$項積$S_1 \times \cdots \times S_n$の部分集合である．

\begin{exercise}
自然数について，「〜は...で割り切れる」という関係を内包的に定義せよ．
\end{exercise}


\section{関係の種類}
\label{sec:relation_kinds}
関係それ自体は単に積集合の部分集合に過ぎない．
しかし関係には様々な性質を持つものがあり，これは部分集合のあり方に何らかの構造的制約を課すことに対応する．
ここでは特に，一つの集合$A$を定め，そのデカルト積の中での関係$R \subset A \times A$を考えることにしよう．

すべての対象が自分自身と$R$という関係を持つとき，$R$は\emph{反射的}(reflexive)であると言われる．つまり
\[
 \forall x \in A ( (x,x) \in R )
\]
が成立する．
これは$A \times A$の表で考えると，対角線上にすべてチェックマークがついているということである．
逆にいかなる$x$についても$(x, x) \not\in R$のとき，$R$は非反射的といわれる．

$R$が\emph{対称的}(symmetric)であるとは，$xRy$ならば必ず$yRx$であるとき，つまり
\[
 \forall x, y \in A ( (x,y) \in R \Rightarrow (y,x) \in R)
\]
が成立するときである．
$A \times A$の表では，チェックマークの分布が対角線を折り目として線対称であることである．

逆に，$xRy$であれば必ず$\neg yRx$であるとき，つまり
\[
 \forall x, y \in A ( (x,y) \in R \Rightarrow (y,x) \not\in R)
\]
のとき，$R$は\emph{非対称的}(asymmetric)だといわれる．
このとき，線対称となる箇所$(x,y), (y,x)$のどちらかは必ず空欄である（両方空欄でも問題ない）．
しかし対角線はすべて空欄にならなければならない．
なぜなら$(x,x) \in R$であればその前後を入れ替えたものも$R$に入ってしまうからである．
つまり非対称的な関係は非反射的である．

ややこしいが，非対称性と\emph{反対称性}(anti-symmetric)を混同しないように．
$R$が反対称であるとは，$xRy$かつ$yRx$なら$x=y$であること，つまり
\[
 \forall x, y \in A ( ((x,y) \in R \wedge  (y,x) \in R) \Rightarrow x=y).
\]
反対称的な表は対角線以外では非対称的な表と同じだが，対角線上にチェックマークが入っていてもよい，というところが異なる．
つまり反対称的な関係は非対象的だが，逆は必ずしもそうではない（反対象性は非反射性を含意しないため）．

最後に，関係が\emph{推移的}(transitive)であるとは，$aRb, bRc$なら$aRc$であること，つまり
\[
 \forall x, y, z \in A ((x,y) \in R \wedge (y,z) \in R \Rightarrow (x,z) \in R)
\]
が成り立つことである．

\begin{exercise}
 $=, <, \leq$ について，それぞれ反射的／対称的／反対称的／推移的であるかどうか調べよ．
\end{exercise}

\begin{exercise}
 身近な関係性で，反射性／対称性／推移性を満たすものをそれぞれ挙げよ．
\end{exercise}


\section{同値関係と同値類}
反射的，対称的かつ推移的な関係を\emph{同値関係}(equivalence relation)という．
「（〜と...は）同じ年齢である」，「地続きである」などは同値関係の例である．
$R$が同値関係であるとき，$aRb$を特に$a\sim_R b$ないし誤解の恐れがないときは$a \sim b$と書くことがある．
このとき$a,b$は$R$に関して同値であるといわれる．

\begin{exercise}
 身近な同値関係を挙げ，それが反射性，対称性，推移性を満たすことを確認せよ．
\end{exercise}

同値関係が一つ与えられると，それによって集合の中身を類別することができる．
例として，$A$を都道府県からなる集合と，「地続きである」という同値関係$R$を考えてみよう．\footnote{なおここで「2つの県が地続きである」とは，それらがどこか一部でも陸地において互いに接する，ということだとする．}
このとき，ある県$a$と地続きである県全体の集合を$[a]_R$あるいは略して$[a]$で表す．すなわち
\[
 [a] = \{x \in A | aRx\}.
\]
これを同値関係$R$による$a$の\emph{同値類}(equivalence class)あるいは\emph{類}とよぶ．
同値類は以下の性質を持つ：
\begin{align}
[a] \cap [b] \neq \emptyset & \iff [x] = [y] \\
\bigcup_{x \in A} [x] & = A
\end{align}
(1)は，もし2つの同値類が共通部分を持つならそれらは完全に等しい，逆に言えば異なる同値類は互いにオーバーラップしない，ということをいっている．
(2)は，$A$の各元の同値類をすべて合わせるともとの集合$A$と等しくなる，ということをいっている．
これは合わせて，$A$という集合は同値類によって\emph{分割}(partition)されるということを意味する．
一つ一つの同値類は，そのように分割された集合の「区画」を表す．
そうした同値類／区画の集合（つまり部分集合の集合）を$A$の$R$による\emph{商集合}とよび，$A/R$で表す．

\begin{exercise}
 $A, R$を上の例の通りとした場合，$A/R$は何個の元をもつか．
\end{exercise}

関係の数だけ，同値類がある．
例えば上の例で$S$を「同じ文字数である」という同値関係にした場合，$A$はまた違ったように分割される．

\begin{exercise}
「同じ漢字を持つ」という関係で$A$を同値類に分割することはできるだろうか．
%できない．推移的でないため．山口／岡山／福岡
\end{exercise}

\begin{example}
哲学において同値類は非常に重要な役割を持つ．
というのもそれは個物（トークン）の関係性からタイプや抽象的性質を作り出すことを可能にするからだ．
例えば次のような同値類を考えてみよ
\[
 [x] = \{ y | y \text{は} x \text{と同じ色である}\}
\]
これによって「同色である」という個物間の関係から，「色」という同値類が得られている．
また
\[
 [x] = \{ y | y \text{は} x \text{と並行である}\}
\]
によって「方向」という概念が得られる．
ここからわかるように，抽象というものの第一歩は同値類を作ることだといえる．
\end{example}

\begin{example}
 現在の生物学において主要な種概念である\emph{生物学的種概念}によれば，ある個体$a$と$b$が同じ種であるのは，両者が繁殖可能であるとき，そのときに限るとされる．これは同値類による分類だとみなしてよいだろうか．もし問題があるとしたら，それはなんだろうか．
\end{example}
% 生物学的種概念


\section{関数}
以下では関係の中でも非常に重要な，\emph{関数}(functions)を取り上げる．
集合$X$から$Y$への関数ないし\emph{写像}(mapping)とは，$X$の各要素$x$に対して必ず一つの要素$y$を対応させるような関係である．
これを
\[
 f : X \to Y
\]
と書く．
$X$を横，$Y$を縦に並べた表（グラフ）で関数を考えると，各列が必ず一個だけチェックマークを含んでいることになる．
$f$が要素$x \in X$に対して$y \in Y$を対応させることを，$f(x)=y$あるいは$f::x \mapsto y$と書いたりする．

% \begin{exercise}
%  関数を内包的に定義してみよ．（ヒント：関係なので積集合の部分集合$\{ (x,y) \in X \times Y | \dots \}$という形になる．「$\dots$」のところには(1)すべての$x \in X$に対してその関係を満たすような$y \in Y$が存在する，(2)そのような$y$は一意である，つまりもし$x$に対し2つの$y, y'$が関係を満たすなら，$y=y'$である，という条件を入れればよい．）
% \end{exercise}

例えば「〜は...国で生まれた」という関係は，人の集合から国の集合への関数になる．
\begin{table}[h]
\centering
\begin{tabular}{ccccc} \hline
  & Alice & Bob & Chris & Dave \\ \hline 
日本 &  & \checkmark &  & \\
アメリカ & \checkmark &  &  & \checkmark \\
フランス &   &  & \checkmark & \\ \hline
\end{tabular} 
\end{table}

この関数は，それぞれの人に対し一つ，そして一つだけ出生地を割り当てている．
関数というと，例えば$y = x^3-2x$のようなものを思い浮かべるかもしれない：
\begin{figure}[h]
\centering
\begin{tikzpicture}[scale=1]
\draw[->,>=stealth,semithick](-2,0)--(2,0)node[above]{$x$};%x軸
\draw[->,>=stealth,semithick](0,-1.5)--(0,1.5)node[right]{$y$};%y軸
\draw[thick,domain=-1.5:1.5] plot(\x,{pow(\x,3)-2*\x});
\end{tikzpicture} 
\end{figure}

実際これは，$X, Y$を実数の集合$\bbR$としたときの関数$f:X \to Y$になっている．
グラフは各$x \in X$に対して唯一の$f(x) \in Y$を割り当てているし，また上の曲線は$\bbR \times \bbR$の部分集合になっていることを確認しよう．


\subsection{像と逆像}

関数$f:X \to Y$は$X$の元を$Y$の元に「飛ばす」が，これを$X$の複数の元に対して行えば，同時に$X$の部分集合に対して$Y$の部分集合を対応させることになる．
関数$f$が$A \subset X$を$Y$に飛ばした先の$Y$の部分集合を，$f$による$A$の\emph{像}(image)とよび，以下のように書く
\[
 f(A) = \{f(x)|x \in A\} 
\]
これは$f(x)$からなる集合なので$Y$の部分集合である．よって$f:X \to Y$は，同時に$f:\mcalP(X) \to \mcalP(Y)$，つまり$X$の部分集合から$Y$の部分集合への関数も自然に伴うことになる．


関数$f:X \to Y$では，一つの$x$に対応する$y$は一つしかないが，逆は必ずしも成り立たない．
つまり，$f(x) = f(x') = y$となる複数の異なる$x \neq x'$が存在しうる．
例えば上の出生地表では，「$f(x)=\text{アメリカ}$」となる人はAliceとDaveの二人がいるし，$y=x^3-2x$の場合$x=0, \pm \sqrt{2}$のとき$f(x)=0$となる．
ある$f$によって$y \in Y$に「飛ばされる」$X$の値の集合を，$y$の$f$による\emph{逆像}(inverse image)といい，次のように書く
\[
f^{-1}(y) := \{ x \in X | f(x) = y\}.
\]
上に述べたように一般に逆像は$X$の一つの元ではなく，その部分集合になるので，$f^{-1}$は$Y \to X$への関数ではない．
むしろそれは$X$の冪集合への関数，すなわち$f^{-1}:Y \to \mcalP(X)$である．

\begin{exercise}
 上の出生地表で，各国の逆像を求めよ．
\end{exercise}


\section{全射と単射}
\ref{sec:relation_kinds}節では，反射性や対称性など，色々な関係のあり方を見た．
同様に，関数にも制約を加えることで種類を考えることができる．
これらの種別は大変重要なので，最初はこんがらがるかもしれないがぜひ頭に叩き込んでおいてほしい．

関数$f:X \to Y$が\emph{全射}(surjection)であるとは，$Y$のすべての元が対応する$X$を持つということ，より正確に言えば$f(X)=Y$となることである．
つまり$X$を関数で飛ばすことで$Y$の全域をカバーすることができる．ここから全射は「上からの」(onto)写像ともいわれる．

関数$f:X \to Y$が\emph{単射}(injection)であるとは，異なる$X$の元は必ず異なる$Y$の元に飛ばされる，つまり$x \neq x'$なら$f(x) \neq f(x')$が成り立つということである．
あるいは単射とはその逆像$f^{-1}(y)$が常に単元集合になる関数，といってもよい．
重複を防ぐためには当然，$Y$の元の個数は$X$の元の個数より多くなければならない．
ここから単射は「中への」(into)写像ともいわれる．

全射かつ単射であるような関数は，\emph{全単射}(bijection)といわれる．
全単射$f:X \to Y$があるとき，$X$の元と$Y$の元は一対一に対応する．
よって全単射のことを\emph{1対1写像}(one-to-one mapping)ともいう．

$f:X \to Y$が全単射であるとき，$Y$のすべての元$y$に対して，$f(x)=y$となるような$x \in X$が必ず一つだけ存在する．
よって$y$をそのような$x$に対応させるような関数を考えることができる．
これを$f$の逆写像とよび，$f^{-1}$と表す．つまり
\[
 f^{-1}:Y \to X, \hspace{2em} y \mapsto x \text{ such that } f(x)=y
\]
である．
記号は上の節でみた逆像と同じだが，内容は違うので混同しないように．
逆像は$Y$から$X$の冪集合への関数で，あらゆる関数について考えることができる．
一方，逆写像は$Y$から$X$への関数で，これは$f$が全単射であるときのみ存在する．
なぜならそのとき，逆像は$X$の元になるからだ．

\begin{exercise}
 逆写像を持つためには$f$は単射でなければならないことは上で納得できたと思う．ではなぜそれは全射である必要があるのだろうか．
\end{exercise}



\end{document}